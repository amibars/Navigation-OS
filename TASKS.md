# TASKS — Архитектурный стек каталога репозиториев

## 0) Контекст и цель
Каталог должен быть **машиночитаемым и человекочитаемым одновременно**: чтобы любой ИИ‑агент, IDE, OpenCode/iFlow, чат‑бот (Perplexity/GPT/Claude/Gemini) мог **быстро понять, что разворачивать, что интегрировать, а что исключить** для конкретной задачи, запроса, автоматизации и закрытия рутины.

**Цель:** превратить README в устойчивый «decision system», а не просто список ссылок.

## 1) Наблюдения (аудит) → Решения
- **Короткий TL;DR** не объясняет, как выбирать. → Ввести расширенный TL;DR + алгоритм выбора.
- **Нет легенды по Maturity/Latency/Inputs/Ops**. → Добавить определения и допустимые значения.
- **Слишком много TODO/see README** в Quickstart. → Ввести валидатор: Quickstart должен быть реальным или метка `Not deployable`/`reference`.
- **Много записей без Inputs**. → Ввести обязательные Inputs: ключи/кошелёк/браузер/DB/GPU/данные.
- **Слишком общий Not for** (“Other stacks/needs review”). → Обязательное конкретное «анти‑применение».
- **Дубли (fork/star)** мешают выбору. → Явно маркировать статус и объединять дубли.
- **Fit/Ops прописаны неравномерно**. → Стандартизировать формат блока Fit/Maturity/Ops для каждой записи.
- **В конце у многих репо слишком мало сведений.** → Минимальный стандарт заполненности для каждого repo.

## 2) Источники и происхождение данных
- **Источник списка:** 
ub stars/forks владельца (amibars).  
- **Правило:** каждый repo имеет метку происхождения: `owned | forked | starred | curated`.

## 3) Архитектура каталога (pipeline)
1. **Ingestion**: парсинг stars/forks/owned.
2. **Normalization**: унификация названий, якорей, дубликатов.
3. **Enrichment**: заполнение TL;DR, Fit/Maturity/Ops, Inputs, Quickstart, Limitations.
4. **Validation**: проверка полноты, дубли, плейсхолдеры.
5. **Publish**: обновление README + генерация метрик (coverage отчёт).

## 4) Модель данных (обязательные поля)
**Таблица (Catalog Table)**
- Repo
- Category
- Best for
- Not for (конкретный анти‑кейс)
- Quickstart (реальная команда/URL)
- Maturity
- Latency/Cost
- Inputs
- Source (owned/forked/starred/curated)
- Type (app/service/cli/sdk/reference/template/unknown)
- Deployable (yes/no/unknown)

**Описание репозитория (Detailed Descriptions)**
- **TL;DR:** минимум 3 предложения; должен быть *длиннее и подробнее*, чем TL;DR GOAT‑примера.
- **Быстрый выбор:** ✅/❌ в формате “если/если”.
- **Запуск:** реальная инструкция, не “TODO”.
- **Архитектура:** 3–6 пунктов (ключевые компоненты).
- **Примеры:** 2–5 прикладных кейсов.
- **Ограничения:** 3–6 пунктов.
- **Fit / Maturity / Ops:** единый формат + значения.
- **Full links:** repo + docs.

## 5) Стандарты и определения
### 5.1 Maturity
- `active` — регулярные апдейты/релизы
- `maintained` — стабильный, поддерживается
- `experimental` — эксперимент, API нестабилен
- `stale` — давно не обновлялся
- `curated` — список/подборка
- `deprecated` — не использовать
- `unknown` — данных нет

### 5.2 Latency/Cost
- `fast` — низкая задержка/стоимость
- `balanced` — компромисс
- `quality` — лучшее качество, дороже

### 5.3 Ops friction
- `low` — запускается за 5–15 минут
- `medium` — требуется среда (DB/GPU/Chrome/keys)
- `high` — сложные зависимости, долгий запуск

### 5.4 Inputs
- Стандартный список: `API key`, `wallet`, `GPU`, `DB`, `browser`, `dataset`, `tokens`.

### 5.5 Source / Type / Deployable
- **Source:** `owned | forked | starred | curated | unknown`
- **Type:** `app | service | cli | sdk | reference | template | unknown`
- **Deployable:** `yes | no | unknown`

## 6) Правила TL;DR (обязательные)
- **Длина:** ≥ 3 предложения.  
- **Содержание:** что это, для кого, что делает, 1–2 ключевые особенности, 1 ограничение.  
- **Сравнимость:** TL;DR должен быть более информативным, чем пример GOAT.

## 7) Quick Router (правила)
- Каждая строка: “задача → 2–4 лучших repo”
- Без дубликатов
- Допускаются `curated/reference` (желательно помечать тегом в списке)

## 8) Валидация и качество
**Автоматические правила:**
- Нет `TODO/see README/—` в Quickstart.
- `Inputs` не пустой.
- `Not for` — не общий.
- `Maturity` ∈ допустимых.
- Уникальные repo (без дублей).
- Если `Type = reference` → `Deployable = no`.  
  *Исключение:* curated‑списки, которые содержат **запускаемые подпроекты**, могут иметь `Deployable = yes` для подпроектов.

## 9) Метрики качества
- % заполненности Quickstart
- % заполненности Inputs
- % конкретных Not for
- % дублей
- % stale/experimental

## 10) Приоритетный тасклист (P0 → P2)
### P0 — блокеры для выбора
- [x] ~~Ввести легенду и определения (Maturity/Latency/Inputs/Ops)~~
- [x] ~~Стандартизировать TL;DR, Fit/Maturity/Ops для каждой записи~~
- [x] ~~Убрать плейсхолдеры Quickstart и Inputs~~
- [x] ~~Отметить Deployable/Non‑deployable~~

### P1 — качество маршрутизации
- [x] ~~Добавить 3–5 “stack recipes” под бизнес‑кейсы~~
- [x] ~~Ввести поле `Source` (owned/forked/starred/curated)~~
- [x] ~~Убрать дубли (merge/alias)~~

### P2 — поддержка и масштабирование
- [x] ~~Скрипт валидации качества~~
- [x] ~~Автоматический отчёт о покрытии~~
- [x] ~~Политика “stale” и регулярный аудит~~

## 11) Приёмка (Definition of Done)
- Все repo имеют валидный Quickstart и Inputs.
- TL;DR стандарт соблюдён (>=3 предложений).
- Есть легенда/определения в README.
- Нет дублирующих репозиториев без явного alias.
- Добавлены 3+ stack recipes.

## 12) Отчётность и журнал
- Каждое обновление фиксируется: дата, автор, количество изменённых записей, % покрытие.
- В README — краткий “Update cadence” блок.

## 14) Остатки / Полировка (не блокирует)
- [ ] Углубить curated‑TL;DR: добавить больше конкретных разделов/категорий из README.
- [ ] Разнообразить `Not for` для топ‑категорий (AI Agent/AI/Other) вручную по реальным use‑case.
- [ ] Причесать “Other” категорию: разбить на 2–3 осмысленных (например: DevOps/Infra/Utility).
- [ ] Добавить 2–3 stack recipes под бизнес‑кейсы (если появятся новые категории).
## 13) Корректность и предостережения
- При внесении крупных правок (замена таблиц/секторов) сначала копируй `README.md` как бэкап: если что‑то пошло не так, откат позволит избежать потери >50% записей и кучи токенов.
